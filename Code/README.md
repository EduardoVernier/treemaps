# TreemapStability
This project contains the implementation of 14 treemap techniques. Our study focuses on the behavior of these methods in the context of dynamic hierarchies.

### Compiling
To compile the Java code, simply run  `./compile`  from the repository's root.

### Running
This application outputs the rectangles generated by the treemapping techniques. Initially, it does not allow for visual inspection, for that see section [Visualizing](#visualizing).

The generation takes four arguments:
- `input_dir` - path where the dataset is located
- `width` - width of the base rectangle
- `height` - height of the base rectangle
- `output_dir` - path where the outputted rectangles will be saved.

`./treemaps.sh input_dir width height output_dir`

Example: `./treemaps.sh dataset/exo 1000 1000 output`

To do batch testing for all datasets in `./dataset/`, run

`for dataset in $(find dataset/* -maxdepth 0 -type d); do ./treemaps.sh $dataset 1000 1000 output; done`  

### Datasets
A dataset is a set of _csv_ files, where each file corresponds to one revision or time step. A file consists of a header, containing the columns id and weight, followed by a list of _(id,weight)_ tuples. Each id shows the full hierarchical path from root to leaf. Weights can be any positive real number. An example of valid file is shown below and an example of dataset can be found at the `dataset` directory.

```
id,weight
src/main/AndroidManifest.xml,20
src/androidTest/java/com/iwsbrazil/calcuta/ExampleInstrumentedTest.java,26
src/main/java/com/iwsbrazil/calcuta/MainActivity.java,13
src/main/res/values/colors.xml,12
src/main/res/values/styles.xml,16
src/test/java/com/iwsbrazil/calcuta/ExampleUnitTest.java,17
src/main/res/layout/activity_main.xml,7
src/main/res/values/dimens.xml,5
src/main/res/values-w820dp/dimens.xml,6
src/main/res/values/strings.xml,3
```

### Visualizing
There are two ways to visualize the technique outputs.
The first assumes you've already generated the rectangles as shown in [Running](#running). It is then possible to run the `draw_treemap.py` script located at `code/util` to simply plot the results. With Python and the matplotlib library installed, you can run: `python draw_treemap.py rectangles_dir`.

The second way, which allows for interaction, uses the Java AWT package. For information on how to run it, check the README files at the `code/dynamic-map`, `code/insertion-treemap`, and `code/incremental-treemap` directories.

### Techniques
The implemented techniques are:

- [Slice and Dice](https://dl.acm.org/citation.cfm?id=115768)
- [Squarified Treemap](https://link.springer.com/chapter/10.1007/978-3-7091-6783-0_4)
- [Ordered Treemap Pivot-by-Middle](https://dl.acm.org/citation.cfm?id=857710)
- [Ordered Treemap Pivot-by-Size](https://dl.acm.org/citation.cfm?id=857710)
- [Strip Treemap](https://dl.acm.org/citation.cfm?id=857710)
- [Nmap Alternate Cut](http://ieeexplore.ieee.org/document/6876012/)
- [Nmap Equal Weights](http://ieeexplore.ieee.org/document/6876012/)
- [Spiral Treemap](http://ieeexplore.ieee.org/document/4376152/)
- [Moore Treemap](http://ieeexplore.ieee.org/document/6185545/?reload=true)
- [Hilbert Treemap](http://ieeexplore.ieee.org/document/6185545/?reload=true)
- [No moves](https://www.scopus.com/record/display.uri?eid=2-s2.0-85028715864&origin=inward&txGid=79d555d432fb4591ed03215553ac3a72)
- [Incremental Treemap](https://www.scopus.com/record/display.uri?eid=2-s2.0-85028715864&origin=inward&txGid=79d555d432fb4591ed03215553ac3a72)
- [Aproximation Treemap]()
- [Insertion Treemap](https://github.com/EduardoVernier/insertion-treemap)


### Analysis
The analysis techniques employed at the paper are in a separate [repository](https://github.com/EduardoVernier/metric-processor).
